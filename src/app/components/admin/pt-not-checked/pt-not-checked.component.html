<div class="page-content">
  <div class="custom-table">
    <div class="table-header">
      <h2 class="left">Phòng trọ chờ duyệt</h2>
      <input type="button" class="btn-modal left" (click)="addUser()" name="submit" value="Thêm phòng trọ">
      <a class="right" (click)="deletePT()"><i class="fa fa-trash-o"></i></a>
      <div class="search-bar right">
        <label for="search-input">
          <i class="fa fa-search"></i>
        </label>
        <input type="text" id="search-input" name="search" [ngModel]="searchTerm" (ngModelChange)="searchPT($event)" placeholder="Tìm kiếm phòng trọ theo username, địa chỉ,...">
      </div>
    </div>
    <div *ngIf="!listPTNotChecked || listPTNotChecked.length === 0">
      <p class="error">Không tìm thấy phòng trọ</p>
    </div>
    <div *ngIf="listPTNotChecked.length > 0" class="table-content">
      <table class="table">
        <thead>
          <tr>
            <th class="index"></th>
            <!-- <th>Username</th> -->
            <th>Ngày đăng</th>
            <th colspan="3" class="break-word">Địa chỉ</th>
            <th>Giá tiền</th>
            <th>Số phòng trống</th>
            <th>Diện tích (m<sup>2</sup>)</th>
          </tr>
        </thead>
        <tbody>
          <tr (click)="showDetailItem(item)" [ngClass]="{'active': listPTCheckbox[i]}" *ngFor="let item of listPTNotChecked, let i = index">
            <td class="index" (click)="$event.stopPropagation();">
              <input type="checkbox" name="acceptPT" value="1" [ngModel]="listPTCheckbox[i]" (ngModelChange)="updateCheckAll($event, i, 'accept')">
            </td>
            <td>{{item.ngaydang}}</td>
            <td colspan="3">{{item.diachi}}</td>
            <td>
              <p *ngIf="item.giatien > 0">{{item.giatien | number}}</p>
              <p *ngIf="item.giatienTheoNguoi > 0">{{item.giatienTheoNguoi | number}} / người</p>
            </td>
            <td>{{item.sophong}}</td>
            <td>{{item.dientich}}</td>
          </tr>
        </tbody>
      </table>
      <div class="check-all left">
        <span>Chọn tất cả</span>
        <input type="checkbox" (click)="checkAll()" [(ngModel)]="checkAllPT">
      </div>
      <input type="button" class="btn-modal right deny-btn" (click)="denyPT()" name="submit" value="Không chấp nhận">
      <input type="button" class="btn-modal right" (click)="acceptPT()" name="submit" value="Duyệt">
    </div>
  </div>
</div>
<app-detail-popup #detailPopup [typeInfo]="'phòng trọ'" [info]="selectedPT"></app-detail-popup>
