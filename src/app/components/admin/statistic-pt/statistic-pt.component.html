<div class="page-content">
  <div class="row margin-bottom-30">
    <div class="custom-table">
      <div class="table-header">
        <div>
          <h3 *ngIf="loaiLvCmt == 0" class="left">Phòng trọ được yêu thích nhất</h3>
          <h3 *ngIf="loaiLvCmt == 1" class="left">Phòng trọ được bình luận nhiều nhất</h3>
          <div class="select-month right">
            <i class="fa fa-calendar"></i>
            <select [ngModel]="selectedMonth[4]" (ngModelChange)="thongkeLvCmt($event, 'month')" class="form-control right">
              <option *ngFor="let item of listMonth" [value]="item">Tháng {{item}}</option>
            </select>
          </div>
        </div>
        <ul>
          <li class="radio" *ngFor="let item of nameRadioLvCmt, let i = index">
            <label>
              <input type="radio" name="loaiLvCmt" [value]="i" [ngModel]="loaiLvCmt" (ngModelChange)="thongkeLvCmt($event)" [checked]="loaiLvCmt === i"> {{item}}
            </label>
          </li>
        </ul>
      </div>
      <div *ngIf="!listPTLvCmtView || listPTLvCmtView.length === 0">
        <p class="error">Không tìm thấy phòng trọ</p>
      </div>
      <div *ngIf="listPTLvCmtView.length > 0 && listUser.length > 0" class="table-content">
        <table class="table">
          <thead>
            <tr>
              <th class="index">#</th>
              <th>Username</th>
              <th>Ngày đăng</th>
              <th colspan="3">Địa chỉ</th>
              <th>Giá tiền</th>
              <th>Diện tích (m<sup>2</sup>)</th>
              <th *ngIf="loaiLvCmt == 0">Lượt thích</th>
              <th *ngIf="loaiLvCmt == 1">Lượt bình luận</th>
            </tr>
          </thead>
          <tbody>
            <tr (click)="showDetailItem(item)" *ngFor="let item of listPTLvCmtView">
              <th class="index">{{item.id}}</th>
              <td class="break-word">{{listUser[item.userID]?.username}}</td>
              <td>{{item.ngaydang}}</td>
              <td colspan="3">{{item.diachi}}</td>
              <td>
                <p *ngIf="item.giatien > 0">{{item.giatien | number}}</p>
                <p *ngIf="item.giatienTheoNguoi > 0">{{item.giatienTheoNguoi | number}} / người</p>
              </td>
              <td>{{item.dientich}}</td>
              <td>{{item.thich}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row margin-bottom-30">
    <div class="chart pie-chart">
      <div class="select-type">
        <div class="header">
          <h3 class="left">Thống kê số phòng trọ</h3>
          <div class="select-month right">
            <i class="fa fa-calendar"></i>
            <select [ngModel]="selectedMonth[0]" (ngModelChange)="thongkeDiachi($event, 'month')" class="form-control right">
              <option *ngFor="let item of listMonth" [value]="item">Tháng {{item}}</option>
            </select>
          </div>
        </div>
        <ul>
          <li class="radio" *ngFor="let item of nameRadioDiachi, let i = index">
            <label>
              <input type="radio" name="loaiDiachi" [value]="i" [ngModel]="loaiDiachi" (ngModelChange)="thongkeDiachi($event)" [checked]="loaiDiachi === i"> {{item}}
            </label>
          </li>
        </ul>
      </div>
      <div class="canvas">
        <canvas *ngIf="datasetsDiachi && datasetsDiachi.length > 0" baseChart [data]="datasetsDiachi" [labels]="labelsDiachi" [chartType]="'pie'">
        </canvas>
      </div>
    </div>
    <div class="chart pie-chart">
      <div class="select-type">
        <div class="header">
          <h3 class="left">Thống kê số phòng trọ</h3>
          <div class="select-month right">
            <i class="fa fa-calendar"></i>
            <select [ngModel]="selectedMonth[3]" (ngModelChange)="thongkeDvA($event, 'month')" class="form-control right">
              <option *ngFor="let item of listMonth" [value]="item">Tháng {{item}}</option>
            </select>
          </div>
        </div>
        <ul>
          <li class="radio" *ngFor="let item of nameRadioDvA, let i = index">
            <label>
              <input type="radio" name="loaiDvA" [value]="i" [ngModel]="loaiDvA" (ngModelChange)="thongkeDvA($event)" [checked]="loaiDvA === i"> {{item}}
            </label>
          </li>
        </ul>
      </div>
      <div class="canvas">
        <canvas *ngIf="datasetsDvA && datasetsDvA.length > 0" baseChart [data]="datasetsDvA" [labels]="labelsDvA" [chartType]="'pie'">
        </canvas>
      </div>
    </div>
  </div>
  <div class="chart margin-bottom-30">
    <div class="select-type">
      <div class="header">
        <h3 class="left">Thống kê số phòng trọ</h3>
        <div class="select-month right">
          <i class="fa fa-calendar"></i>
          <select [ngModel]="selectedMonth[1]" (ngModelChange)="thongkeTvDT($event, 'month')" class="form-control right">
            <option *ngFor="let item of listMonth" [value]="item">Tháng {{item}}</option>
          </select>
        </div>
      </div>
      <ul>
        <li class="radio" *ngFor="let item of nameRadioTvDT, let i = index">
          <label>
            <input type="radio" name="loaiTvDT" [value]="i" [ngModel]="loaiTvDT" (ngModelChange)="thongkeTvDT($event)" [checked]="loaiTvDT === i"> {{item}}
          </label>
        </li>
      </ul>
    </div>
    <canvas *ngIf="datasetsTvDT[0].data && datasetsTvDT[0].data.length > 0" baseChart [datasets]="datasetsTvDT" [labels]="labelsTvDT" [options]="options" [chartType]="'bar'">
    </canvas>
  </div>
  <div class="chart margin-bottom-30">
    <div class="select-type">
      <div class="header">
        <h3 class="left">Thống kê số phòng trọ</h3>
        <div class="select-month right">
          <i class="fa fa-calendar"></i>
          <select [ngModel]="selectedMonth[2]" (ngModelChange)="thongkeKhac($event, 'month')" class="form-control right">
            <option *ngFor="let item of listMonth" [value]="item">Tháng {{item}}</option>
          </select>
        </div>
      </div>
      <ul>
        <li class="radio" *ngFor="let item of nameRadioKhac, let i = index">
          <label>
            <input type="radio" name="loaiKhac" [value]="i" [ngModel]="loaiKhac" (ngModelChange)="thongkeKhac($event)" [checked]="loaiKhac === i"> {{item}}
          </label>
        </li>
      </ul>
    </div>
    <canvas *ngIf="datasetsKhac[0].data && datasetsKhac[0].data.length > 0" baseChart [datasets]="datasetsKhac" [labels]="labelsKhac" [options]="options" [chartType]="'bar'">
    </canvas>
  </div>
</div>
